
import pyxel

class App:
    def __init__(self):
        # 32x32 ウィンドウ
        pyxel.init(32, 32)
        # 単一の白いピクセル画像を作成
        pyxel.images[0].set(0, 0, ["1"])
        pyxel.run(self.update, self.draw)

    def update(self):
        pass

    def draw(self):
        pyxel.cls(0)
        # 10,10に1x1ピクセルを描画。10倍スケーリング。
        # w=1, h=1. 中心 10.5, 10.5?
        # Pyxelが中心(x+w/2)を使用する場合、w=1では整数除算か？ 10+0 = 10？
        # それとも浮動小数点？
        # w=2, h=2を試す。位置10,10。
        # 中心 11,11。
        # スケール 2.0。結果 4x4。
        # 11,11を中心にすべき。
        # 左上: 11 - 2 = 9。
        # 元の左上: 10。
        # ずらし: -1。 (w/2 * (scale-1)) = 1 * 1 = 1。
        
        # テスト 1: w=8, h=8 を 0,0 に描画。スケール 1 (白)
        pyxel.rectb(0, 0, 8, 8, 7)
        
        # テスト 2: w=8, h=8 を 0,16 に描画。スケール 2 (赤)
        # 期待値: -4ずれる？ つまり -4, 12 から開始？
        pyxel.blt(0, 16, 0, 0, 0, 8, 8, 8, scale=2.0)
        
        # 論理的な左上 (0, 16) を緑の点でマーク
        pyxel.pset(0, 16, 11)

App()
